# AgentCore Agents 

## ğŸ§  1. æ€è€ƒãƒ»ä¼šè©±ç³»ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

### **â‘  ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆæ”¯æ´ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ**

* **ç›®çš„:** Bedrock AgentCoreã®ãƒ¡ãƒ¢ãƒªæ©Ÿèƒ½ã‚’æ´»ç”¨ã—ã€éå»ã®ä¼šè©±ã‚„çŸ¥è­˜ã‚’å‚ç…§ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ã‚’æ”¯æ´ã™ã‚‹ã€‚
* **å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ:** çŸ­æœŸãƒ¡ãƒ¢ãƒªï¼ˆShort-termï¼‰ã¨é•·æœŸãƒ¡ãƒ¢ãƒªï¼ˆLong-termï¼‰ã®é€£æºã«ã‚ˆã‚‹æ–‡è„ˆä¿æŒã€‚
* **æŠ€è¡“:** AWS Bedrock AgentCore Memoryãƒ»Strands Agentãƒ»Bedrock Modelã‚’çµ±åˆã€‚
* **ãƒ‡ãƒ¢ä¾‹:** ã€Œä»Šé€±ã®é€²æ—ã‚’ã¾ã¨ã‚ã¦ã€ã¨å…¥åŠ› â†’ éå»ã®ä¼šè©±ã¨çŸ¥è­˜ã‚’å‚ç…§ã—ã¦è¦ç´„ã‚’ç”Ÿæˆã€‚

---

### **â‘¡ ã‚¿ã‚¹ã‚¯åˆ†è§£ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ**

* **ç›®çš„:** ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç›®æ¨™ã‚’åˆ†è§£ã—ã€ãƒªã‚µãƒ¼ãƒã¨çµ±åˆã‚’è¡Œã£ã¦å®Ÿè¡Œå¯èƒ½ãªãƒ—ãƒ©ãƒ³ã‚’ä½œæˆã™ã‚‹ã€‚
* **å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ:** LangGraphã‚’ç”¨ã„ãŸã‚¹ãƒ†ãƒƒãƒ—å‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ§‹ç¯‰ã¨ã€å¤–éƒ¨æ¤œç´¢ï¼ˆDuckDuckGoï¼‰é€£æºã€‚
* **æŠ€è¡“:** LangGraphãƒ»LangChain Community Toolsãƒ»AWS Bedrock AgentCoreãƒ»Strands Agentã‚’çµ„ã¿åˆã‚ã›ã€‚
* **ãƒ‡ãƒ¢ä¾‹:** ã€Œæ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æº–å‚™ã‚’ã—ãŸã„ã€ã¨å…¥åŠ› â†’ åˆ†è§£â†’èª¿æŸ»â†’çµ±åˆã®3æ®µéšã§å®Ÿè¡Œè¨ˆç”»ã‚’ç”Ÿæˆã€‚

---

### **â‘¢ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¿œç­”ã‚¿ã‚¹ã‚¯åˆ†è§£ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ**

* **ç›®çš„:** LangGraphã‚’ç”¨ã„ã¦ã€è¤‡æ•°ã‚¹ãƒ†ãƒƒãƒ—ã®å‡¦ç†çµæœã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¿”ã™ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ§‹ç¯‰ã™ã‚‹ã€‚
* **å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ:** SSEï¼ˆServer-Sent Eventsï¼‰ã«ã‚ˆã‚‹æ®µéšçš„å¿œç­”ã¨ã€LangGraphã®ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œåˆ¶å¾¡ã€‚
* **æŠ€è¡“:** LangGraphãƒ»LangChain AWSï¼ˆChatBedrockï¼‰ãƒ»AWS Bedrock AgentCoreã‚’é€£æºã€‚
* **ãƒ‡ãƒ¢ä¾‹:** ã€Œæ˜æ—¥åå¤å±‹ã«è¡Œãè¨ˆç”»ã‚’ç«‹ã¦ã¦ã€ã¨ä¾é ¼ â†’ å„ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆåˆ†è§£â†’èª¿æŸ»â†’çµ±åˆï¼‰ã®çµæœã‚’é †ã«ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡ºåŠ›ã€‚

---

### **â‘£ CodeInterpreterã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ**

- **ç›®çš„:**  ç”Ÿæˆã—ãŸå›ç­”ã‚’å®Ÿéš›ã®Pythonã‚³ãƒ¼ãƒ‰ã§æ¤œè¨¼ã—ã€è¨ˆç®—ãƒ»è«–ç†ãƒ»ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æ­£ç¢ºæ€§ã‚’ç¢ºèªã™ã‚‹ã€‚
- **å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ:**  Bedrock AgentCoreã®Code Interpreteræ©Ÿèƒ½ã‚’ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦çµ±åˆã—ã€Strands AgentçµŒç”±ã§å®Ÿè¡Œãƒ»çµæœæ¤œè¨¼ã‚’è¡Œã†ã€‚
- **æŠ€è¡“:**  AWS Bedrock AgentCoreãƒ»Strands Agentãƒ»Bedrock Modelãƒ»Code Interpreter Client ã‚’é€£æºã€‚
- **ãƒ‡ãƒ¢ä¾‹:**  ã€ŒCan all the planets in the solar system fit between the earth and moon?ã€ã¨å…¥åŠ› â†’  ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•ç”Ÿæˆãƒ»å®Ÿè¡Œã—ã€è¨ˆç®—çµæœã‚’åŸºã«çµè«–ã‚’æç¤ºã€‚


---

### **â‘¤ ãƒ•ã‚¡ã‚¤ãƒ«è§£æã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ**

* **ç›®çš„:** CSVãƒ»PDFãªã©ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã€åˆ†æãƒ»è¦ç´„ã€‚
* **å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ:** ãƒ•ã‚¡ã‚¤ãƒ«å…¥å‡ºåŠ›ã€æ§‹é€ åŒ–å‡ºåŠ›ã€‚
* **æŠ€è¡“:** LangChain document loaders + Pandas + LLMã€‚
* **ãƒ‡ãƒ¢ä¾‹:** å£²ä¸Šãƒ‡ãƒ¼ã‚¿CSVã‚’è§£æã—ã¦ã€Œå‚¾å‘ã¨èª²é¡Œã€ã‚’å ±å‘Šã€‚

---

### **â‘¥ DevOpsã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ**

* **ç›®çš„:** ãƒ­ã‚°ã‚’è§£æã—ã€ã‚¨ãƒ©ãƒ¼åŸå› ã¨ä¿®æ­£æ–¹æ³•ã‚’ææ¡ˆã€‚
* **å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ:** ãƒ‰ãƒ¡ã‚¤ãƒ³ç‰¹åŒ–ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆã€æ­£è¦è¡¨ç¾ã®æ´»ç”¨ã€‚
* **æŠ€è¡“:** Regex + LLMã€‚
* **ãƒ‡ãƒ¢ä¾‹:** AWS CloudWatchãƒ­ã‚°ã‚’èª­ã¿ã€ã€Œã“ã®ã‚¨ãƒ©ãƒ¼ã®åŸå› ã¨å¯¾å‡¦æ³•ã€ã‚’èª¬æ˜ã€‚

---

## ğŸ§© 3. çŸ¥è­˜ãƒ»å”åƒå‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

### **â‘¦ RAGãƒ™ãƒ¼ã‚¹QAã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ**

* **ç›®çš„:** ç¤¾å†…è³‡æ–™ã‚„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ¤œç´¢ã—ã¦ç­”ãˆã‚‹ã€‚
* **å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ:** Embeddingã€ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã€RAGæ§‹æˆã€‚
* **æŠ€è¡“:** FAISS / Chroma + LangChain + OpenAI Embeddingsã€‚
* **ãƒ‡ãƒ¢ä¾‹:** ã€Œã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®KPIã¯ï¼Ÿã€â†’ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰è‡ªå‹•å›ç­”ã€‚

---

### **â‘§ ãƒãƒ¼ãƒ å”èª¿å‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ**

* **ç›®çš„:** è¤‡æ•°ã®å½¹å‰²ï¼ˆãƒ—ãƒ©ãƒ³ãƒŠãƒ¼ãƒ»ãƒªã‚µãƒ¼ãƒãƒ£ãƒ¼ãƒ»ãƒ©ã‚¤ã‚¿ãƒ¼ï¼‰ã‚’æŒã¤ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå”åŠ›ã—ã¦1ã¤ã®ã‚¿ã‚¹ã‚¯ã‚’é”æˆã€‚
* **å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ:** ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ»ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€‚
* **æŠ€è¡“:** CrewAI / AutoGenã€‚
* **ãƒ‡ãƒ¢ä¾‹:** ã€ŒAIã®æœªæ¥ã«ã¤ã„ã¦è¨˜äº‹ã‚’æ›¸ã„ã¦ã€â†’åˆ†æ‹…ã—ã¦åŸ·ç­†ã€‚

---

## ğŸ–¥ï¸ 4. UIãƒ»å¿œç”¨ç³»ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

### **â‘¨ Web UIé€£æºãƒãƒ£ãƒƒãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ**

* **ç›®çš„:** Webã‚¢ãƒ—ãƒªä¸Šã§å‹•ãAIãƒãƒ£ãƒƒãƒˆã‚’æ§‹ç¯‰ã€‚
* **å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ:** APIé€£æºã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ã®æ¥ç¶šã€‚
* **æŠ€è¡“:** Flask + React / Next.js + Tailwind CSSã€‚
* **ãƒ‡ãƒ¢ä¾‹:** ç¤¾å†…FAQãƒœãƒƒãƒˆã‚„å•†å“èª¬æ˜ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã€‚

---

### **â‘© éŸ³å£°ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ**

* **ç›®çš„:** éŸ³å£°å…¥åŠ›ãƒ»éŸ³å£°å‡ºåŠ›å¯¾å¿œã®ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«AIã€‚
* **å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ:** éŸ³å£°èªè­˜ï¼ˆSTTï¼‰ã€éŸ³å£°åˆæˆï¼ˆTTSï¼‰ã€‚
* **æŠ€è¡“:** OpenAI Whisper + gTTS / Azure Speechã€‚
* **ãƒ‡ãƒ¢ä¾‹:** ã€Œä»Šæ—¥ã®äºˆå®šã¯ï¼Ÿã€ã¨è©±ã—ã‹ã‘ã‚‹ã¨éŸ³å£°ã§å›ç­”ã€‚

---

## ğŸ“˜ å­¦ç¿’ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ï¼ˆãŠã™ã™ã‚é †ï¼‰

| ã‚¹ãƒ†ãƒƒãƒ— | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ    | å­¦ã¶å†…å®¹          |
| ---- | --------- | ------------- |
| â‘     | ä¼šè©±ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ | ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä¿æŒãƒ»ä¼šè©±æ§‹ç¯‰ |
| â‘¡    | ã‚¿ã‚¹ã‚¯åˆ†è§£     | æ¨è«–æ§‹é€ ãƒ»ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ  |
| â‘¢    | è‡ªå·±æ”¹å–„      | ãƒ«ãƒ¼ãƒ—æ§‹é€ ãƒ»è‡ªå·±è©•ä¾¡    |
| â‘£    | ãƒ•ã‚¡ã‚¤ãƒ«è§£æ    | I/Oæ“ä½œã¨æ§‹é€ åŒ–å¿œç­”   |
| â‘¤    | Webãƒªã‚µãƒ¼ãƒ   | APIé€£æºã¨è¦ç´„      |
| â‘¥    | DevOpsæ”¯æ´  | ãƒ­ã‚°è§£æãƒ»å®Ÿè·µå¿œç”¨     |
| â‘¦    | RAG QA    | ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã¨çŸ¥è­˜æ´»ç”¨   |
| â‘§    | ãƒãƒ¼ãƒ å”èª¿     | ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé€£æº   |
| â‘¨    | UIé€£æº      | Webã‚¢ãƒ—ãƒªçµ±åˆ      |
| â‘©    | éŸ³å£°å¯¾å¿œ      | ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«å‡¦ç†     |

---

## ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ

```
ai-agents/
â”œâ”€ agents/
â”‚  â”œâ”€ 01_chat_reasoner/
â”‚  â”œâ”€ 02_task_planner/
â”‚  â”œâ”€ 03_self_reflector/
â”‚  â”œâ”€ 04_web_researcher/
â”‚  â”œâ”€ 05_file_analyzer/
â”‚  â”œâ”€ 06_devops_assistant/
â”‚  â”œâ”€ 07_rag_qa/
â”‚  â”œâ”€ 08_multi_agent_team/
â”‚  â”œâ”€ 09_web_ui/
â”‚  â””â”€ 10_voice_assistant/
â”œâ”€ common/
â”‚  â”œâ”€ utils/
â”‚  â”œâ”€ memory/
â”‚  â””â”€ config/
â”œâ”€ README.md
â””â”€ requirements.txt
```


## IAM

* BedrockAgentCorePolicy

```
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "ECRImageAccess",
            "Effect": "Allow",
            "Action": [
                "ecr:BatchGetImage",
                "ecr:GetDownloadUrlForLayer"
            ],
            "Resource": [
                "arn:aws:ecr:us-east-1:180048383118:repository/*"
            ]
        },
        {
            "Effect": "Allow",
            "Action": [
                "logs:DescribeLogStreams",
                "logs:CreateLogGroup"
            ],
            "Resource": [
                "arn:aws:logs:us-east-1:180048383118:log-group:/aws/bedrock-agentcore/runtimes/*"
            ]
        },
        {
            "Effect": "Allow",
            "Action": [
                "logs:DescribeLogGroups"
            ],
            "Resource": [
                "arn:aws:logs:us-east-1:180048383118:log-group:*"
            ]
        },
        {
            "Effect": "Allow",
            "Action": [
                "logs:CreateLogStream",
                "logs:PutLogEvents"
            ],
            "Resource": [
                "arn:aws:logs:us-east-1:180048383118:log-group:/aws/bedrock-agentcore/runtimes/*:log-stream:*"
            ]
        },
        {
            "Sid": "ECRTokenAccess",
            "Effect": "Allow",
            "Action": [
                "ecr:GetAuthorizationToken"
            ],
            "Resource": "*"
        },
        {
            "Effect": "Allow",
            "Action": [
                "xray:PutTraceSegments",
                "xray:PutTelemetryRecords",
                "xray:GetSamplingRules",
                "xray:GetSamplingTargets"
            ],
            "Resource": [
                "*"
            ]
        },
        {
            "Effect": "Allow",
            "Resource": "*",
            "Action": "cloudwatch:PutMetricData",
            "Condition": {
                "StringEquals": {
                    "cloudwatch:namespace": "bedrock-agentcore"
                }
            }
        },
        {
            "Sid": "GetAgentAccessToken",
            "Effect": "Allow",
            "Action": [
                "bedrock-agentcore:GetWorkloadAccessToken",
                "bedrock-agentcore:GetWorkloadAccessTokenForJWT",
                "bedrock-agentcore:GetWorkloadAccessTokenForUserId"
            ],
            "Resource": [
                "arn:aws:bedrock-agentcore:us-east-1:180048383118:workload-identity-directory/default",
                "arn:aws:bedrock-agentcore:us-east-1:180048383118:workload-identity-directory/default/workload-identity/agentName-*"
            ]
        },
        {
            "Sid": "BedrockModelInvocation",
            "Effect": "Allow",
            "Action": [
                "bedrock:InvokeModel",
                "bedrock:InvokeModelWithResponseStream"
            ],
            "Resource": [
                "arn:aws:bedrock:*::foundation-model/*",
                "arn:aws:bedrock:us-east-1:180048383118:*"
            ]
        },
        {
            "Effect": "Allow",
            "Action": [
                "bedrock-agentcore:ListEvents",
                "bedrock-agentcore:CreateEvent",
                "bedrock-agentcore:GetEvent",
                "bedrock-agentcore:ListMemories",
                "bedrock-agentcore:GetMemory"
            ],
            "Resource": [
                "arn:aws:bedrock-agentcore:us-east-1:180048383118:memory/*"
            ]
        }
    ]
}
```


## å¾—ãŸå­¦ã³
### 1 Memory

* Short Term Memoryã®èª­ã¿å–ã‚Šã¨Long Term Memoryã®èª­ã¿å–ã‚Šã®Permissionã¯ç•°ãªã‚‹ã€‚
* Long Term Memoryã®èª­ã¿å–ã‚Šã«ã¯ã€`bedrock-agentcore:RetrieveMemoryRecords` ãŒå¿…è¦ã ã£ãŸã€‚

```
		{
			"Effect": "Allow",
			"Action": [
				"bedrock-agentcore:ListEvents",
				"bedrock-agentcore:CreateEvent",
				"bedrock-agentcore:GetEvent",
				"bedrock-agentcore:ListMemories",
				"bedrock-agentcore:GetMemory",
				"bedrock-agentcore:RetrieveMemoryRecords"
			],
			"Resource": [
				"arn:aws:bedrock-agentcore:us-east-1:180048383118:memory/*"
			]
		}
```

### 3 SSE
* yieldã§è‡ªåœ¨ã«é€”ä¸­ã®ãƒªã‚¿ãƒ¼ãƒ³ã‚’è¿”å´ã§ãã‚‹ã€‚


### 4 Code Interpreter
* Tool ã¨ã—ã¦CodeInterpreterã‚’ç™»éŒ²ã—ãŸã‚‰ã€é©åˆ‡ãªå›ç­”ã‚’è¿”ã™ã¾ã§è¤‡æ•°å›ã®Interpreterå‘¼ã³å‡ºã—ãŒè¡Œã‚ã‚Œã†ã‚‹ã€‚